// script.js

document.addEventListener('DOMContentLoaded', () => {
    const letters = [
        {
            date: 'September 7th, 2024',
            day: 'Saturday',
            content: `hey beautiful <3 i was just thinkign about u and i was like oh right i have to write this stuff down. 

ur so precious ilysm, id write u a million poems, well.. if i wasn't bad at it.
i think i might write these more as like, vlogs rather than the random schizobabble ive been doing until now, i feel like thatd be better sob. i'll delete all the entries before this one, so technically its the first one?
so uhhh HIIIi!! WEL COME!! this is like a BLOG/DIARY/LETTER/LOG KINDA THING IDK!!! i just write down random stuff here, ill try to keep it daily but no promises teehee.

so anyways today we like, talked on ig and uh calledddd and stuff. and u sent me palestine rant vms but tbh i was just listening to ur pretty voice couldnt focus on what ur saying
oh and later we just did our own stuff on call, it was comforting knowing u were there with me, but then u left because u thought it was boring and now im sad.. anyways ur asleep soo.

DUDE MY NOTES APP.. if i rewrote this stuff now thered be like 500000 pages. also my doors broken now tjanks to my dad. 

ya im super tired so ill gts now, bye pretty, i love you <3`
        },
        {
            date: 'September 8th, 2024',
            day: 'Sunday',
            content: `HI!!!!! WE VCD FIR THE FIRST TIEM TODAY!!!!!! we played DRESS TO IMPRESS!! HIT ROBLOX GAME DRESS TO IMPRESS!!!!! i dont think my dressing impressed u tho 😔
i liked ur fits tho u were mega swaggy. also u sabotaged me into saying vinegar AND THEN U MADE ME SAY THE N WORD IN CANTONESE! UR SUCH A GOOBIE..
i watched u play thjat one wheel thing and it was fun (besides the part where u said sean was funnier than me)

anyways i think u should TOTALLY BUY DRESS TO IMPRESS VIP!!!! its very worth the uhh 800 robux or wtv.. we also played cart ride into 13 pregnant hyenas or wtv it was called but tjat was just filler.

WE UH, SHOWER CALLED? I SHOWER CALLED U.. i think i ruined my phone case. idk if bringing my phone into the shower was a good idea it started typing stuff by itself, also i got cleanser in my eye.
u were being SUPER WEIRD THO WDYM BY "he'll never know" WHT SONG IS 1:12 TJE TIMESTAMP TO U FREAK OF NATURE. oh also we did that typhoon assignment thing earlier and it was FUUN, well mostly because i was doing nothing-
AI did most of it anyways. we almost sleep called too (not really). GRR IM IN LOVE WITH THE SHAPE OF YOU IM IN LOVE WITH UR BODY (i love ed she ran) OKAY ANWYAYS I WONT KEEP U HEREE, I LOVE YOU SO MUCH,
I LOVE YOUUUUU MWAHHHHH. BYE PRINCESS <3`
        },
        {
            date: 'September 9th, 2024',
            day: 'Monday',
            content: `HI CHERRY GORL, we vcd today n u read out fanfics while i was at the gym and i almost died, oh it was also leg day so u heard me moan in pain (U BETTER NOT HAVE RECORDED IT)
everyone probably looked at me weird because i was talking to myself but I DO NOT CARE ITALKED TO MY GIRLY TODAY TEEHEEEEE. also u had such a stupid name idk why u put it as that, yk i was calling with echad
and then i got a notif and i saw ur name and like, it just ruined my mood so i hung up on him ugh.. BUT ITS OK BECAUSE THEN U CALLEDM EMEE. oh also we looked at plushies earlier and u (almost) played piano teehee
i was like reading out cantonese on call and u told me my pronunciation was sigma, so mgoi ig ahaha ;) (w rizz). ALSO U BETTER SHOW ME THOSE PLUSHIES U ORDERED FROM TAOBAO
RIGHT AS U GET THEM! and my condolences u were forced to look at BMW cars for however many hours 😭 my baby does not deserve that kind of torture.. 

dude i played my stupid guitar without an amp and it soudns so bad ughhh, I HAVE SOMETHING COOKING UP THOUGH TRUST!!!! next time ill play for u when i have ACTUAL FUNCTIONAL EQUIPMENT. today was tje best and i dont think i can do it justice in this entry..
i love you more than anything mwwwah`
        },
        {
            date: 'September 10th, 2024',
            day: 'Tuesday',
            content: `hi babyy, we were calling and then i messed it up by saying i was bored like an IDIOT! IM AN IDIOT I WAASNT BORED IM SO STRUPID I LVEOYOU. and now ur asleep, i hope ur ok.. yk alot of times when i worry
i spam u because im scared i made u feel bad lol.. and then i delete my messages after a few hours because i realize i was probably overthinking and ud be super weirded out..
anyways u were playing dti with emma (u mogged the entire lobby unironically)
i woke up at 9AM.. THATS SO DUBM, WHYD I WAKE UP SO LATE, I COULDVE HAD SO MUCH TIME WITH YOU OMFG
i wish we'd talk more today, every time u leave im just agonized because I MISS YOUU AAAAAAA
not alot to talk about 😭😭i hope we talk alot more tomorrowwww, bye ilyy <3`
        },
        {
            date: 'September 11th, 2024',
            day: 'Wednesday',
            content: `hi princess, i love you mwah <3 i love you so so much u were so cool today as always. i'd call you cute but i'm not allowed to. i honestly thought about u all day, yk im really not joking when i say i miss you EVERY SECOND we're not talking.. like i actually cant have fun doing anything.. i hate timezones. when we talked in vc like 3 days ago i was like super starstruck (yeah yeah fancy words ik, dont bully me..) the butterflies i got were better than any preworkout i couldve taken👍 (even tho i almost died on my squat when u were reading those fanfics).. oh we also have that cooking date on oct 3rd, i wonder what we're making because i dont want it to be too simple and have our date be over in like 5 minutes, but i also dont want to pick something complicated and have you burning your kitchen down.. well, honestly ur probably way better of a cook than u let on so we'll manage... probably.   oh also im getting a joooob, i wanna be able to buy u a bunch of cute stuff, i wont spoil u too much tho because then youll think im ur discord sugar daddy and only love me for the money 😱(kidding). i was watching reels just now and i saw a bunch of guys STEALING MY IDEAS, like, hello? calling your girlfriend honeybun is MY THING, ITS MY TRADEMARK, GO FIND YOUR OWN THING BUCKO. i love youuu <3`
        },
        {
            date: 'September 12th, 2024',
            day: 'Thursday',
            content: `hi babyyy, ur asleep rn so ill just log stuff here rq. mm we talked about a bunch of fun stuff todayyy
ur teachers and ur mom chewed u out for missing work.. and i was like yo hands off my girl before i unleash the alpha, dumb fujckign boomers bro.

pov: relearning music theory to help u with assignments.

oh also u saw a woman gambling on the mtr (i still think u should've stolen her phone and ran..)

dude when i was scrolling through reels some woman said writing letters is romantic.. I CAME UP WITH THE IDEA FOR THESE ENTRY THINGIES ON MY OWN!!! I DONT NEED IG REELS TO TELL ME HOW TO RUN MY RELATIONSHIP!!!!

u liked some reel about how i dont love u again.. i wonder how i tell u ur the most lovable human alive...

we're totally making cinnamon rolls on that date, ive made up my mind (i suck at baking).

i thought about u all day again, i love you <3
also YAY TOMORROWS A FRIDAY YA YAY AY AYY AY YAYAYAYYA AY YAY
U DONT KNWO HOW HAPPY I AM
FINALLY WE GET TO DO STUFFFFFF
oh i also need to update the website again, hmmm.
YAY IST A FRIDAY ITS A FRIDAY YAYYAY YAYAYAYAYASY
OK UR HERE!!
BYE I LOVE YOU`
        },
        {
            date: 'September 13th, 2024',
            day: 'Friday',
            content: `hi runiee. we had sm fun today. u put up with my stupid dumb overthinking and explained everything, i love you, i really love you, i dont think i deserve you.

we called and u did a comedy routine with sick dad jokes, its a sleep call now tho teehee. 
uve been asleep for like 8 hours now (dw im not listening to u breathe.. ur mic is too crappy to pick that up anyways.)

i tried to fall asleep with u but uh i ended up not sleeping at all and then i got up like 5 hours later mad because i coudlnt sleep (im so weird) and i wouldnt get to wake up to ur voice. its ok now tho youll probably wake up soon. 

i love you, idk what id do without you.. i feel like the luckiest person alive because i get to call you mine forever. i promise ill do everything i can to be the best, ill do everything i can to make u the happiest girl on earth, its the least i could do. 

u wanted to change yourself today, you didnt like yourself, and that made me sad becase youre beautiful, you radiate so bright, even when you think you don't, u light up everything around you, and when im with you all my worries and troubles go away, when im with you im the happiest i can be. thats why i want to do the same for you, i want to make you the happiest you can be, i want you to laugh even more than you already do, i want to make sure youre always satisfied. i hope these dont sound like empty words, because they arent. i genuinely cant express how grateful i am to you for being in my life, and for being yourself. please dont try to be someone else, i don't want to lose you and i don't want you to lose yourself either. 

also, i didnt say this but i havent been too well this past week, and you did more today than you could possibly understand, i love you. thank you for being here with me. i can finally rest assured knowing we're forever.

its okay now, you made it all okay. ok im sorry ill stop, i love you.

on a side note my handwriting is super ugly pls help what do i do with it.. i think ill start working on it.`
        },
        {
            date: 'September 14th, 2024',
            day: 'Saturday',
            content: `hi baby, i didn't sleep for like 2 days and forced u to put up with me today JAAJAJA. we called and u streamed metronome to keep me occupied (i was literally on the brink of death.) then we talked and u showed me ur beautiful handwriting and ur plushie collection, oh and i showed u that spiderman plush LMAO. also we got naughty at 3am no clickbait. i love you forever <3`
        },
        {
            date: 'September 15th, 2024',
            day: 'Sunday',
            content: `hii, i watched u play dti and then i fell back asleep. then when i woke up i went out to breakfast LIEK AN IDIOT!!! AND U WANTED TO CALL WHEN I WASNT HOME SO IWAS LIKE
OK ILL CALL U IN ABIT, SO LIKLE I CALLED U UH 30 MINS LATER AN IT WAS TOO LATE D U WERE ALREADY ASLEEP, I WANA DIE I WANNA KMS,. we called when i was at Costco for a lil bit and u asked if i wanted u to turn ur camera on, i gave hte most DUMBASS ANSWER POSSIBLE, SUCH A DUMBASS. and then u left the call a few mins later, im so fickign stipid. anyways tje weekend is over now ): i just have to wait until the next one ig...`
        },
        {
            date: 'September 16th, 2024',
            day: 'Monday',
            content: `hi, its like 3AM for u rn but we haven't rlly talked today so far, well u called me at (my) 2am but tjat was for like 10 seconds lol. anyways i love you i'll add onto here if something else happens today

you didn't feel like talking today, u were really irritable and said a bunch of stuff i hope u dont mean. its okay, i'll just ask about it whenever you wanna talk. u called me annoying and unfunny and i just, idk,
ill gts.. i was really tired today so i was moody.. ill probably be better once i do. bye, i love you.`
        },
        {
            date: 'September 17th, 2024',
            day: 'Tuesday',
            content: `hi my beautiful girly, you went over to ur cousins for that autumn festival thingy and u guys did karaoke (including shape of you and animals by maroon 5 aha x) ur singing voice is so pretty im so lucky i get to hear it so often teehee.

ignore yesterdays entry i was super stupid, ive been getting too stupid lately, i dont think i appreciate you enough if im somehow capable of feeling moody with such a perfect girly by my side.. i really need to punch myself sometimes
sigh. 

oh also we called for a bit, it was fun but u kept bringing up pot (the person not the drug), i want to bury that female for both of our sakes, shes been causing too much ruckus for you. I LOVE YOUUUUU, i made sure to let you know how much i love you today, hopefully you wont be too grossed out by the cheesiness..`
        },
        {
            date: 'September 18th, 2024',
            day: 'Wednesday',
            content: `hi <3 you went to ikea todaaay, then you found god (for about like, 2 hours maybe..) then we called and had a bunch of fun, even tho you kept leaving because it was boring and then calling back like 10 minutes later. 
            
it was so cute, ur so indecisive.. i left that one call with echad and he called me a traitor but idc hajjajajhja, and to answer your question, no, you're the only person i ever did and ever will drop everything for. it wasn't like this with anyone else, ever ;) 

and like you stayed up until 4AM with me, ON A SCHOOLDAY!!!! AAAAA, its okay, its okay, its not okay... what do i do??? what do ido ur gonna suffer so much in school SFUJKCKK AA HELP AAASFIOSANJGOI IM SORRYUY FOR KEEPING
U UP I UST COULDNT HELP WANTING TO TALK AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA. okay ill figure something out, probably.. i love you <3

oh also you helped me with math, might've made me blush a little. byee mwwwah`
        },
        {
            date: 'September 19th, 2024',
            day: 'Thursday',
            content: `hii, i woke up at like 3AM and we talked for a bit, and then i fell back asleep when u left lol. then we called for like 20 mins and u left (u lied and told me u were going to sleep..) and i was like sad, and when u woke up we talked abt random stuff for a bit. i hope we talk more tomorrow because its A FRIDAY AFTER ALl!!!!! oh also you have two tests today, mashallah you do well. okay ill gts now, mwah ily <3`
        },
        {
            date: 'September 20th, 2024',
            day: 'Friday',
            content: `hi baby, we called today and it was fun. i lost my airpods but like then i found them.. you also BURIED UR FACE INTO UR CAT FOR SOME REASON??? so ur nose was super stuffy and u sneezed alot LMAO. anyways u played minesweeper and i uh did my homework, and then u told me to shut up so i told u to shut up, and you uh left and ghosted me ever since. thats always fun. i wish we'd have talked more today, shame friday got wasted like this.

anyways since i couldn't talk to present you ig ill just talk to future you instead.. sooo, hiii babyy, hyddd??
oh u hate when i ask that dont you.. uhhh, okay let me think.. where am i rn?? can u call me? i probably want u to call me.. if you need an excuse just say past me told you to do it 👍👍
and go easy on future me he's probably still being stupid all the time, he definetly loves you though, so call me and dont leave that call no matter what. try not to call it boring either because he might cry...

mm i wonder when you'll get the password... howd u even get it? maybe i gave u a hint?? mm, nahh ur smart enough to figure it out by yourself.

where are you rn? what'd you do today? (well.. your today..) i hope you're happy, and if you aren't then TALK TO ME, TALK TO ME RN!!!! I NEED TO KNOW!!!!!! NOOOOOW!!!! if you are then thats good, nothing makes me happier than knowing you're happy.

i hope you got to go to the mall with your friends alot more and that u looked at a bunch of cute plushies (WITHOUT BEING ABANDONED), i hope u went to the restaurant with ur mom and ur sister and ate some yummy food again, also i hope its not too hot outside (you better wear sunscreen because you're supposed to, EVEN IF ITS COLD) because ik u hate the heat. oh and i hope NewJeans r still together and that u learned their new choreo (kinda hope u showed me too.)

sorry if this entry is a bit jumbled, i wrote it throughout the entire day and im not a big proofreader lol..

i love you so much runie,
there's nothing i love more than you, there's nothing more important than you.. and i'd never, ever do something to hurt you on purpose. don't doubt any of that for a second.
i hope you know how precious you are.. i'll make sure my beautiful cherry girl gets all the love she deserves <3`
        },
        {
            date: 'September 21st, 2024',
            day: 'Saturday',
            image: '../images/flatbread.gif',
            imageClass: 'flatbread' ,
            textBelowImage: 'are we gonna eat it with soy sauce?',
            content: `hi pretty, i made you worry too much today by being stupid...
anyways, you were there for me, you cheered me up and you dont understand how much that meant. i think i need to appreciate you more.. 
you're doing so much for me, you're always trying your best and i'll say it for the millionth time, i'm so lucky to have you <3

ANYWAYS, enough dooming and glooming. WE HAVE A DISH!!! we're making ig reels potato flatbread on our date ahaahaha (picked out by you ofc 😼) im happy we didnt go with cinnammon rolls because all they do is cause is cavities and diabetes (plus i suck ass at baking) and theyre only 3 INGREDIENTS TOO!! THATS RIGHT!! THREE!!! im such a goated potato pancake salesman..

i kinda wrote you a paragraph again.. you hate them dont you 😭 im sorryy ill delete it.. i wanna make it up to you after today but idk what to dooo, mmmmm HELPPPP EHGLP WHAT DO I DO AAAA.. OH WAIT I FORGOT TO UPDATE THE WEBSITE YESTERDAY SJIT, ILL DO IT LATER 

okay, ITS DECIDED, I AM STAYING UP WITH YOU TODAY. WE BARELY HAD ANY FUN THIS WEEKEDN!! today's goals are making you laugh and making sure ur not bored aha x WISH ME LUCKKK, i'll give an update on these goals later.

OH ALSO i'm learning how to make these entries look prettier, i dont wanna burn your eyes. ANNNND WHAT BETTER WAY TO START THAN PICS!!! and gifs and stuff.. 

ya ill start putting pics in these.... this sounded way more exciting in my head..

i'm not even nearly done with this part of the website,
it'd be so embarassing if you got 
the password now and it was this ugly 😭
also im only like 20 entries in 
so we can't have that happening..


ANYWAYS since today is actually tomorrow for you 
i'll just end this entry here and start writing the next one. 
BYE BABYYYY, I LOVE YOUU!!!`
        },
    ];

    const container = document.querySelector('.document-container');
    const navigation = document.getElementById('navigation');
    const prevButton = document.getElementById('prev-button');
    const nextButton = document.getElementById('next-button');

    let currentIndex = 0; // Start with the first letter
    let isLetterOpen = false;
    // Generate the envelope elements
    letters.forEach((letter, index) => {
        const envelope = document.createElement('div');
        envelope.classList.add('envelope');
        envelope.dataset.index = index;

        const dateElem = document.createElement('div');
        dateElem.classList.add('date');
        envelope.appendChild(dateElem);

        container.appendChild(envelope);
    });

    function updateEnvelopes() {
        const envelopes = document.querySelectorAll('.envelope');
        envelopes.forEach((envelope, index) => {
            const offset = (index - currentIndex) * 120; // Adjust spacing
            envelope.style.top = `calc(50% + ${offset}px)`;
            envelope.style.zIndex = 1000 - Math.abs(index - currentIndex);
    
            // Add or update the center date for all envelopes
            let centerDate = envelope.querySelector('.center-date');
            if (!centerDate) {
                centerDate = document.createElement('div');
                centerDate.classList.add('center-date');
                envelope.appendChild(centerDate);
            }
            centerDate.innerHTML = `${letters[index].day}<br>${letters[index].date}`;
    
            // Apply the visual scaling for selected or unselected envelopes
            if (index === currentIndex) {
                envelope.classList.add('selected');
                envelope.style.transform = 'scale(1.1)';
            } else {
                envelope.classList.remove('selected');
                envelope.style.transform = 'scale(1)';
            }
        });
    }
    
    

    updateEnvelopes();

    // Scroll wheel navigation
    container.addEventListener('wheel', (e) => {
        if (isLetterOpen) return;
        e.preventDefault();
        if (e.deltaY < 0) {
            // Scroll up
            if (currentIndex > 0) {
                currentIndex--;
                updateEnvelopes();
            }
        } else {
            // Scroll down
            if (currentIndex < letters.length - 1) {
                currentIndex++;
                updateEnvelopes();
            }
        }
    });

// Click on envelope to select or open letter
container.addEventListener('click', (e) => {
    if (isLetterOpen) return;

    const envelope = e.target.closest('.envelope');
    if (envelope) {
        const index = parseInt(envelope.dataset.index);

        // Check if the clicked envelope is already the selected one
        if (index === currentIndex) {
            // If the envelope is already selected, open the letter
            openLetter(currentIndex);
        } else {
            // If it's not selected, just select it and update envelopes
            currentIndex = index;
            updateEnvelopes();
        }
    }
});


    // Open letter
    function openLetter(index) {
        isLetterOpen = true;

        let letter = document.querySelector('.letter');
        if (!letter) {
            letter = document.createElement('div');
            letter.classList.add('letter');

            const closeButton = document.createElement('div');
            closeButton.classList.add('close-button');
            closeButton.innerHTML = '&times;';
            closeButton.addEventListener('click', closeLetter);
            letter.appendChild(closeButton);

            const dateDiv = document.createElement('div');
            dateDiv.classList.add('letter-date');
            letter.appendChild(dateDiv);

            const contentDiv = document.createElement('div');
            contentDiv.classList.add('content');
            letter.appendChild(contentDiv);

            document.body.appendChild(letter);
        }

        // Update the date
        const dateDiv = letter.querySelector('.letter-date');
        dateDiv.textContent = letters[index].date;

        // Update the content
        const contentDiv = letter.querySelector('.content');
        contentDiv.innerHTML = letters[index].content;

        // Clear previous content to prevent duplication
        contentDiv.innerHTML = letters[index].content;

        // Add image and optional text above/below if they exist
        if (letters[index].image) {
            // Create image container
            const imageContainer = document.createElement('div');
            imageContainer.classList.add('image-container');

            // Assign fixed-position class based on imageClass
            if (letters[index].imageClass === 'flatbread') {
                imageContainer.classList.add('fixed-position');
            }

            // Optional text above the image
            if (letters[index].textAboveImage) {
                const textAbove = document.createElement('div');
                textAbove.classList.add('text-above');
                textAbove.textContent = letters[index].textAboveImage;
                imageContainer.appendChild(textAbove);
            }

            const img = document.createElement('img');
            img.src = letters[index].image; // Path to the image
            img.alt = 'Letter image'; // Optional alt text for accessibility

            // Add custom image class if it exists in the letter object
            if (letters[index].imageClass) {
                img.classList.add(letters[index].imageClass); // e.g., 'flatbread'
            }

            img.classList.add('letter-image'); // General class for all images
            imageContainer.appendChild(img); // Append the image to the image container

            // Optional text below the image
            if (letters[index].textBelowImage) {
                const textBelow = document.createElement('div');
                textBelow.classList.add('text-below');
                textBelow.textContent = letters[index].textBelowImage;
                imageContainer.appendChild(textBelow); // Append text below the image
            }

            contentDiv.appendChild(imageContainer); // Append the image container to the letter's content
        }

        navigation.style.display = 'flex';

        const envelopes = document.querySelectorAll('.envelope');
        envelopes.forEach((env) => {
            env.style.visibility = 'hidden';
        });

        setTimeout(() => {
            document.addEventListener('click', outsideClickListener);
        }, 0);

        letter.addEventListener('click', (event) => {
            event.stopPropagation();
        });
    }

    // Close letter
    function closeLetter() {
        isLetterOpen = false;
        const letter = document.querySelector('.letter');
        if (letter) {
            letter.remove();
        }

        // Hide navigation buttons
        navigation.style.display = 'none';

        // Remove outside click listener
        document.removeEventListener('click', outsideClickListener);

        // Show envelopes
        const envelopes = document.querySelectorAll('.envelope');
        envelopes.forEach((env) => {
            env.style.visibility = 'visible';
        });

        updateEnvelopes();
    }

    // Outside click listener to close the letter
    function outsideClickListener(event) {
        const letter = document.querySelector('.letter');
        if (letter && !letter.contains(event.target) && !navigation.contains(event.target)) {
            closeLetter();
        }
    }

    // Navigation buttons
    prevButton.addEventListener('click', () => {
        if (currentIndex > 0) {
            currentIndex--;
            updateEnvelopes();
            openLetter(currentIndex);
        }
    });

    nextButton.addEventListener('click', () => {
        if (currentIndex < letters.length - 1) {
            currentIndex++;
            updateEnvelopes();
            openLetter(currentIndex);
        }
    });

    // Keyboard navigation
    document.addEventListener('keydown', (e) => {
        if (isLetterOpen) {
            if ((e.key === 'ArrowDown' || e.key === 'ArrowLeft') && currentIndex > 0) {
                currentIndex--;
                updateEnvelopes();
                openLetter(currentIndex);
            } else if ((e.key === 'ArrowUp' || e.key === 'ArrowRight') && currentIndex < letters.length - 1) {
                currentIndex++;
                updateEnvelopes();
                openLetter(currentIndex);
            } else if (e.key === 'Escape') {
                closeLetter();
            }
        } else {
            if ((e.key === 'ArrowDown' || e.key === 'ArrowLeft') && currentIndex > 0) {
                currentIndex--;
                updateEnvelopes();
            } else if ((e.key === 'ArrowUp' || e.key === 'ArrowRight') && currentIndex < letters.length - 1) {
                currentIndex++;
                updateEnvelopes();
            } else if (e.key === 'Enter') {
                openLetter(currentIndex);
            }
        }
    });
});